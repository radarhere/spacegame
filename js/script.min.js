function yPoint(y){return effectiveCanvas.height-y+verticalPosition}function drawBlack(){ctx.fillStyle="rgb(0, 0, 0)",ctx.fillRect(0,0,effectiveCanvas.width,effectiveCanvas.height)}function drawWhite(){ctx.fillStyle="rgb(255, 255, 255)",ctx.fillRect(0,0,effectiveCanvas.width,effectiveCanvas.height)}function drawStars(){var y=18e3-verticalPosition;null!=gate&&(y-=hyperdriveOffset),ctx.drawImage(backgroundImages[level-1],0,y,750,500,0,0,750,500)}function drawSpace(){drawBlack(),drawStars()}function fadeToWhite(){ctx.fillStyle="rgba(255, 255, 255, 0.5)",ctx.fillRect(0,0,effectiveCanvas.width,effectiveCanvas.height)}function fadeFromWhite(time){var percentage=1-time;ctx.fillStyle="rgba(255, 255, 255, "+percentage.toString()+")",ctx.fillRect(0,0,effectiveCanvas.width,effectiveCanvas.height)}function fadeInText(){var words=["TWO","THREE","FOUR","FIVE"],names=["ANDROMEDA","THE MILKY WAY","ALPHA CENTAURI","EARTH"];ctx.font="84px",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle="rgba(0, 0, 0, 0.25)",ctx.fillText("LEVEL "+words[level-1],375,200),ctx.fillText(names[level-1],375,300)}function drawDashboard(hero){ctx.fillStyle="rgb(100, 100, 100)",ctx.fillRect(0,effectiveCanvas.height,effectiveCanvas.width,60),ctx.fillStyle="rgb(0, 0, 0)",ctx.fillRect(230,505,510,45),drawLives(),drawConsole("Score: "+score.toString()),drawDial(50,530,20,(hero.x-50)/650*360-180,"rgb(151, 235, 96)"),drawDial(120,530,20,(hero.relativeY-50)/400*360-180,"rgb(73, 198, 255)"),drawDial(190,530,20,(hero.y-100)/17900*360-180,"rgb(255, 78, 29)")}function drawLives(){lives>3&&ctx.drawImage(heroImage,550,507,50,50),lives>2&&ctx.drawImage(heroImage,590,507,50,50),lives>1&&ctx.drawImage(heroImage,630,507,50,50),lives>0&&ctx.drawImage(heroImage,670,507,50,50)}function drawDial(x,y,radius,angle,colour){ctx.beginPath(),ctx.fillStyle="rgb(0, 0, 0)",ctx.arc(x,y,radius,(angle/180-2)*Math.PI,angle/180*Math.PI,!1),ctx.fill(),ctx.strokeStyle=colour,ctx.lineWidth=2,ctx.lineTo(x,y),ctx.stroke()}function drawConsole(text){ctx.font="32px Arial",ctx.textAlign="left",ctx.textBaseline="bottom",ctx.fillStyle="rgb(255, 255, 255)",ctx.fillText(text,250,545)}function drawGameOver(){var gameOverText,fontSize,y;0==lives?(gameOverText="GAME OVER",fontSize="96px Arial",y=150):(gameOverText="CONGRATULATIONS",fontSize="64px Arial",y=120),ctx.font=fontSize,ctx.textAlign="center",ctx.textBaseline="bottom",ctx.fillStyle="rgb(0, 0, 0)",ctx.fillText(gameOverText,375,y),ctx.font="46px Arial",ctx.textAlign="center",ctx.textBaseline="bottom",ctx.fillStyle="rgb(0, 0, 0)",ctx.fillText("PRESS RETURN TO TRY AGAIN",375,450)}function collision(star1,star2){return Math.sqrt(Math.pow(star1.y-star2.y,2)+Math.pow(star1.x-star2.x,2))>star1.radius+star2.radius?!1:(0==star1.speedX?star1.directionX=-star2.directionX:0==star2.speedX&&(star2.directionX=-star1.directionX),0==star1.speedY?star1.directionY=-star2.directionY:0==star2.speedY&&(star2.directionY=-star1.directionY),star1.x>star2.x+10?(star1.directionX=1,star2.directionX=-1):star2.x>star1.x+10&&(star2.directionX=1,star1.directionX=-1),star1.speedY=star2.speedY=(star1.speedY+star2.speedY)/2,star1.y>star2.y+10?(star1.directionY=1,star2.directionY=-1):star2.y>star1.y+10&&(star2.directionY=1,star1.directionY=-1),star1.speedX=star2.speedX=(star1.speedX+star2.speedX)/2,!0)}function heroCollision(star){var rotate,coords,collision=!1,heroX_=hero.x,heroY_=yPoint(hero.y),starX_=star.x,starY_=yPoint(star.y);for(var i in hero.coords){var rotate=hero.rotate;if(coords=rotate%2==0?hero.coords[i]:hero.rotatedCoords[i],0==rotate||1==rotate?(heroX=heroX_+coords[0],heroY=heroY_+coords[1]):2==rotate||3==rotate?(heroX=heroX_-coords[1],heroY=heroY_+coords[0]):4==rotate||5==rotate?(heroX=heroX_-coords[0],heroY=heroY_-coords[1]):(6==rotate||7==rotate)&&(heroX=heroX_+coords[1],heroY=heroY_-coords[0]),starX=starX_-heroX,starY=starY_-heroY,star.radius>=Math.sqrt(Math.pow(starY,2)+Math.pow(starX,2))){collision=!0;break}}return collision}function CollectStars(){this.sounds=[collectStar,collectStar.cloneNode(),collectStar.cloneNode()],this.i=0,this.play=function(){this.sounds[this.i].play(),this.i++,3==this.i&&(this.i=0)}}function muted(){return"muted"==document.getElementById("sound").className}function playSound(cue){muted()||("asteroidRebound"==cue?asteroidRebound.play():"collectStar"==cue?collectStars.play():"activateHyperdrive"==cue?activateHyperdrive.play():"loseLife"==cue?loseLife.play():"extraLife"==cue?extraLife.play():"gameOver"==cue&&gameOver.play())}function Gate(x,y){this.x=x,this.y=y,this.radius=75,this.locked=!1,this.draw=function(){var h=effectiveCanvas.height,p=verticalPosition;return this.y+this.radius>p&&this.y-this.radius<p+h?(ctx.drawImage(gateRingImage,this.x-this.radius,yPoint(this.y)-this.radius),null!=timePosition&&autopilot?(currentTheme.volume=-1*timePosition/100,ctx.globalAlpha=(timePosition+100)/100,ctx.drawImage(gatePlatformImage,this.x-this.radius,yPoint(this.y)-this.radius),ctx.globalAlpha=1):this.locked&&ctx.drawImage(gatePlatformImage,this.x-this.radius,yPoint(this.y)-this.radius),"present"):"absent"},this.drawInShip=function(){hero.x-1>this.x?hero.x-=1:hero.x+1<this.x?hero.x+=1:hero.x!=this.x&&(hero.x=this.x),hero.y-1>this.y?hero.y-=1:hero.y+1<this.y?hero.y+=1:hero.y!=this.y&&(hero.y=this.y),hero.calculatePosition()},this.rotateShip=function(){hero.rotate-.05>0?hero.rotate-=.05:hero.rotate=0},this.detect=function(){heroCollision(this)&&(autopilot=!0,timePosition=-100)},this.autopilot=function(){hero.x!=this.x||hero.y!=this.y?this.drawInShip():0!=hero.rotate||0!=timePosition?(0>timePosition+1?timePosition+=1:timePosition=0,this.rotateShip()):(currentTheme.pause(),currentTheme.volume=1,playSound("activateHyperdrive"),autopilot=!1,hyperdrive=!0,gate.locked=!0,timeSequence=spinHyperdrive)}}function Star(type,x,y,radius,speedX,speedY,colour){this.firstContact=!1,this.selected=!1,this.type=type,this.x=this.resetX=x,this.y=this.resetY=y,this.radius=radius,this.rotation=0,this.directionX=1,this.directionY=1,"undefined"==typeof speedX||"undefined"==typeof speedY?(this.speedX=0,this.speedY=0):(this.speedX=speedX,this.speedY=speedY,this.speedX<0&&(this.speedX=-this.speedX,this.directionX=-1),this.speedY<0&&(this.speedY=-this.speedY,this.directionY=-1)),this.resetSpeedX=this.speedX,this.resetSpeedY=this.speedY,this.resetDirectionX=this.directionX,this.resetDirectionY=this.directionY,this.colour=colour,this.reset=function(){this.firstContact=!1,this.speedX=this.resetSpeedX,this.speedY=this.resetSpeedY,this.x=this.resetX,this.y=this.resetY,this.directionX=this.resetDirectionX,this.directionY=this.resetDirectionY},this.draw=function(){var p=verticalPosition,w=effectiveCanvas.width,h=effectiveCanvas.height;if(!this.firstContact){if(!(this.y+this.radius>p&&this.y-this.radius<p+h))return;this.firstContact=!0}return!remain&&(this.y+this.radius<0||this.y-this.radius>18e3)?"destroy":(this.x+=this.directionX*this.speedX,this.y+=this.directionY*this.speedY,"asteroid"==this.type&&(this.x+this.radius>w&&(this.directionX=-1,this.x=w-this.radius),this.x-this.radius<0&&(this.directionX=1,this.x=this.radius),remain&&(this.y-this.radius<0&&(this.directionY=1,this.y=this.radius),this.y+this.radius>18e3&&(this.directionY=-1,this.y=18e3-this.radius))),this.y+this.radius>p&&this.y-this.radius<p+h?(this.selected?(ctx.fillStyle="rgb(0, 255, 0)",ctx.arc(this.x,yPoint(this.y),this.radius,-2*Math.PI,0,!1),ctx.fill(),"asteroid"==this.type&&(ctx.font="36px",ctx.textAlign="left",ctx.textBaseline="bottom",ctx.fillStyle="rgb(255, 255, 255)",ctx.fillText(this.resetSpeedX,this.x-10,yPoint(this.y)+10),ctx.fillText(this.resetSpeedY,this.x-10,yPoint(this.y)+35))):"star"==this.type?"red"==this.colour?ctx.drawImage(star_redImage,this.x-this.radius,yPoint(this.y)-this.radius):"green"==this.colour?ctx.drawImage(star_greenImage,this.x-this.radius,yPoint(this.y)-this.radius):ctx.drawImage(star_blueImage,this.x-this.radius,yPoint(this.y)-this.radius):(ctx.save(),ctx.translate(this.x,yPoint(this.y)),this.rotation+=this.directionY*this.speedY,360==this.rotation&&(this.rotation=0),ctx.rotate(this.rotation/180*Math.PI),ctx.drawImage(asteroidImage,-this.radius,-this.radius),ctx.restore()),"present"):"absent")}}function generateStars(level,m,n,limit){for(void 0==limit&&(limit=17250),starLimit=limit,asteroidLimit=limit-200,i=0;m>i;i++)level.push(new Star("star",Math.floor(500*Math.random()+100),Math.floor(Math.random()*starLimit+250),14.5,0,0,colours[Math.floor(Math.random()*colours.length)]));for(var i=0;n>i;i++)level.push(new Star("asteroid",Math.floor(500*Math.random()+100),Math.floor(Math.random()*asteroidLimit+450),30,Math.floor(10*Math.random()-5),Math.floor(10*Math.random()-5)))}function Planet(){this.detect=function(){hero.y>17575&&(hero.rotate=0,autopilot=!0,timePosition=0)},this.autopilot=function(){hero.y+hyperdriveOffset+120<18e3?(hyperdriveOffset+=2,hero.calculatePosition()):(autopilot=!1,hyperdrive=!0,hero.y=17500,timeSequence=noPlaceLikeHome)}}function drawScores(){ctx.font="96px",ctx.textBaseline="bottom",ctx.fillStyle="rgb(0, 0, 0)",highScorePosition=null;var nameText,scoreText,i=0;for(nameText in scores){if(scoreText=scores[nameText].toString(),nameText=nameText.substr(0,3),i+=1,ctx.textAlign="left","___"==nameText){if(highScorePosition=i,ctx.fillStyle="rgb(200, 0, 0)",name.length<3)if(nameFlicker+=1,nameFlicker>60)nameFlicker=0;else if(30>nameFlicker){var blank;0==name.length?blank="":1==name.length?blank=" ":2==name.length&&(blank="  "),ctx.fillText(blank+"_",75,120+80*i)}ctx.fillText(name,75,150+80*i),ctx.fillStyle="rgb(0, 0, 0)"}else ctx.fillText(nameText,75,150+80*i);ctx.textAlign="right",ctx.fillText(scoreText,675,150+80*i)}}function acceptKey(eKeyCode){var character=String.fromCharCode(eKeyCode);character.search(/[A-Z]/)||(name+=character,ctx.font="76px",ctx.textAlign="left",ctx.fillText(name,75,150+80*highScorePosition),name.length>2&&(highScorePosition=null,name=name.substr(0,3),saveScore(name)))}function saveScore(name){$.ajax({url:"ajax/scores.php?name="+name+"&id="+highScoreId,dataType:"json",error:function(){},success:function(data){scores=data.scores,highScoreId=null},contentType:"application/json"})}function getScores(){$.ajax({url:"ajax/scores.php?score="+score+"&level="+level,dataType:"json",error:function(){},success:function(data){scores=data.scores,highScoreId=data.id,nameFlicker=0},contentType:"application/json"})}function Hero(){this.width=100,this.height=100,this.speed=7.5,this.engines=!1,this.rotate=0,this.collision=!1,this.flicker=0,this.coords=[[0,20],[0,-50],[-30,15],[30,15],[-30,10],[30,10],[-14,-6],[14,-6],[22,3],[-22,3],[7,-28],[-7,-28]],this.rotatedCoords=[[-14,14],[35,-35],[-31,-10],[10,31],[-28,-14],[14,28],[-5,-14],[14,5],[13,17],[-17,-13],[24,-14],[14,-24]],this.reset=function(){this.x=effectiveCanvas.width/2,this.y=effectiveCanvas.height/4,this.rotate=0},this.draw=function(){if(!this.collision||(this.flicker+=1,3==this.flicker&&(this.flicker=0),0==this.flicker)){var x=this.x,y=500-this.relativeY-hyperdriveOffset;ctx.save(),ctx.translate(x,y),ctx.rotate(Math.PI/4*this.rotate),this.engines?ctx.drawImage(enginesImage,-this.width/2,-this.height/2):ctx.drawImage(heroImage,-this.width/2,-this.height/2),ctx.restore()}},this.fireEngines=function(){this.engines=!0,37 in keysDown&&!(39 in keysDown)?this.rotate=38 in keysDown&&!(40 in keysDown)?7:40 in keysDown&&!(38 in keysDown)?5:6:39 in keysDown&&!(37 in keysDown)?this.rotate=38 in keysDown&&!(40 in keysDown)?1:40 in keysDown&&!(38 in keysDown)?3:2:40 in keysDown&&!(38 in keysDown)?this.rotate=4:38 in keysDown&&!(40 in keysDown)?this.rotate=0:38 in keysDown?this.rotate=0:this.engines=!1,38 in keysDown&&(this.y+=this.speed),40 in keysDown&&(this.y-=this.speed),this.calculatePosition(),37 in keysDown&&(this.x-=this.speed),39 in keysDown&&(this.x+=this.speed),this.x+this.width/2>effectiveCanvas.width&&(this.x=effectiveCanvas.width-this.width/2),this.x<this.width/2&&(this.x=this.width/2)},this.calculatePosition=function(){this.y+this.height/2>17500+effectiveCanvas.height?this.y=verticalPosition+effectiveCanvas.height-this.height/2:this.y<this.height/2&&(this.y=this.height/2),this.y<effectiveCanvas.height/2?(verticalPosition=0,this.relativeY=this.y):this.y>17500+effectiveCanvas.height/2?(verticalPosition=17500,this.relativeY=this.y-verticalPosition):(this.relativeY=effectiveCanvas.height/2,verticalPosition=this.y-effectiveCanvas.height/2)}}function drawObjects(){var star,starState,gameOver=!1,starsInPlay=[],safe=!0;for(var i in stars)if(star=stars[i],starState=star.draw(),"destroy"==starState)stars.splice(i,1),i--;else if("present"==starState&&(null==timePosition&&heroCollision(star)&&("star"==star.type?(stars.splice(i,1),i--,score+=100,score%5e3==0&&4>lives?(lives+=1,playSound("extraLife")):playSound("collectStar")):"asteroid"==star.type&&(invincible||(safe=!1,hero.collision||(lives-=1,0!=lives?(playSound("loseLife"),slowTime=5,hero.collision=!0):(playSound("gameOver"),gameOver=!0))))),"asteroid"==star.type)){for(var j in starsInPlay)collision(star,starsInPlay[j])&&playSound("asteroidRebound");starsInPlay.push(star)}hero.collision&&safe&&(hero.collision=!1,hero.flicker=0,invincible=!0),gameOver&&(hyperdrive=!0,timePosition=0,timeSequence=fadeOut)}function advanceTime(){if(null!=timePosition&&null!=timeSequence){timePosition+=1;var time,action,wearingAWatch,clockTime=0;for(i in timeSequence){if(time=timeSequence[i][0],action=timeSequence[i][1],wearingAWatch=void 0!=timeSequence[i][2],null==time){action(),timePosition=null;break}if(clockTime+time>timePosition){wearingAWatch?action((timePosition-clockTime)/time):action();break}clockTime+=time}null==timePosition&&(timeSequence=null)}}function drawObjectsInSpace(){drawSpace(),drawObjects(),null!=gate&&gate.draw(),hero.draw()}function update(){if(8==numberLoaded&&backgroundLoaded){if(null!=slowTime)if(slowTime-=1,hero.collision){if(slowTime%5!=0)return;slowTime=5}else slowTime-=1,-70>slowTime&&(slowTime=null,invincible=!1);if(highScores){if(null!=highScorePosition)for(var i in keysDown)delete keysDown[i],acceptKey(i);return drawWhite(),drawGameOver(),void drawScores()}ctx.beginPath(),advanceTime(),hyperdrive?0!=hyperdriveOffset&&hero.draw():(autopilot&&(5==level?planet.autopilot():gate.autopilot()),null==timePosition&&hero.fireEngines(),drawObjectsInSpace()),null==timePosition&&(null!=gate?gate.detect():5==level&&planet.detect()),drawDashboard(hero),playTheme&&(playTheme=!1,muted()||currentTheme.play())}}function loadLevel(x){if(level=x,remain=level>3,level<=backgroundImages.length)return void(currentTheme=theme[x-1]);backgroundLoaded=!1;var image=new Image;image.src="images/level"+level.toString()+".png",image.onload=function(){backgroundImages.push(image),backgroundLoaded=!0},currentTheme=new Audio("effects/level"+level.toString()+".mp3"),theme.push(currentTheme),currentTheme.loop=!0}function resetGame(){hyperdrive=!1,stars=levelStars[level-1].slice(0);for(var i in stars)stars[i].reset();level==levelLimit?(gate=null,planet=new Planet):null==gate&&(gate=new Gate(375,17750)),hero.reset(),playTheme=!0}function resetScore(){loadLevel(1),score=0,lives=3}$(document).ready(function(){"undefined"!=typeof $.cookie&&0==$.cookie("volume")&&$("#sound").addClass("muted").find("span").text("Sound Off"),$("#sound").click(function(){$(this).toggleClass("muted"),$(this).hasClass("muted")?($(this).find("span").text("Sound Off"),"undefined"!=typeof $.cookie&&$.cookie("volume",0,{expires:30}),null!=currentTheme&&currentTheme.pause()):($(this).find("span").text("Sound On"),"undefined"!=typeof $.cookie&&$.cookie("volume",1,{expires:30}),null!=currentTheme&&currentTheme.play())}),$(".loading").hide(),$("#game, #sound").show()});var verticalPosition=0,spinHyperdrive=[[20,function(){hyperdriveOffset+=1,drawStars()}],[5,function(){hyperdriveOffset+=2,drawStars()}],[10,function(){hyperdriveOffset+=7,drawStars()}],[8,function(){hyperdriveOffset+=42,drawStars()}],[34,function(){hyperdriveOffset+=3,timePosition%5==0&&fadeToWhite()}],[30,function(){timePosition%5==0&&fadeInText()}],[1,function(){loadLevel(level+1)}],[119,function(){}],[30,function(){timePosition%5==0&&fadeToWhite()}],[1,function(){resetGame(),hyperdrive=!0,hyperdriveOffset=0,hero.engines=!1,hero.calculatePosition(),null!=gate&&(gate.locked=!1)}],[90,function(time){drawObjectsInSpace(),fadeFromWhite(time)},!0],[null,function(){hyperdrive=!1}]],fadeOut=[[70,function(){currentTheme.volume=(100-timePosition)/100}],[30,function(){timePosition%5==0&&fadeToWhite(),currentTheme.volume=(100-timePosition)/100}]],noPlaceLikeHome=[[70,function(){currentTheme.volume=(100-timePosition)/100}],[30,function(){timePosition%5==0&&fadeToWhite(),currentTheme.volume=(100-timePosition)/100}],[200,function(){(110==timePosition||170==timePosition||230==timePosition||290==timePosition)&&lives>0&&(1==lives?(lives=-1,timePosition=290):lives-=1,score+=1e3,playSound("extraLife"))}],[1,function(){hyperdriveOffset=0}]],endScreen=[[1,function(){currentTheme.pause(),currentTheme.volume=1,name="",scores=null,getScores()}],[29,function(){}],[null,function(){highScores=!0}]];fadeOut=fadeOut.concat(endScreen),noPlaceLikeHome=noPlaceLikeHome.concat(endScreen);var numberLoaded=0,backgroundLoaded,gateRingImage=new Image;gateRingImage.src="images/gateRing.png",gateRingImage.onload=function(){numberLoaded++};var gatePlatformImage=new Image;gatePlatformImage.src="images/gatePlatform.png",gatePlatformImage.onload=function(){numberLoaded++};var heroImage=new Image;heroImage.src="images/spaceship.png",heroImage.onload=function(){numberLoaded++};var enginesImage=new Image;enginesImage.src="images/spaceshipMotion.png",enginesImage.onload=function(){numberLoaded++};var backgroundImages=[],asteroidImage=new Image;asteroidImage.src="images/asteroid.png",asteroidImage.onload=function(){numberLoaded++};var star_blueImage=new Image;star_blueImage.src="images/star_blue.png",star_blueImage.onload=function(){numberLoaded++};var star_redImage=new Image;star_redImage.src="images/star_red.png",star_redImage.onload=function(){numberLoaded++};var star_greenImage=new Image;star_greenImage.src="images/star_green.png",star_greenImage.onload=function(){numberLoaded++};var asteroidRebound=new Audio("effects/asteroidRebound.wav");asteroidRebound.volume=.3;var collectStar=new Audio("effects/collectStar.wav");collectStar.volume=.3,collectStars=new CollectStars;var activateHyperdrive=new Audio("effects/activateHyperdrive.wav"),loseLife=new Audio("effects/loseLife.wav");loseLife.volume=.5;var extraLife=new Audio("effects/extraLife.wav");extraLife.volume=.5;var gameOver=new Audio("effects/gameOver.wav");gameOver.volume=.6;var theme=[],currentTheme=null,sounds=[asteroidRebound,collectStar,activateHyperdrive,extraLife,gameOver],gate=null,colours=["red","blue","green"],starPath=[[375,440],[375,605],[375,807.5],[375,987.5],[375,1175],[375,1392.5],[375,1617.5],[375,2045],[517.5,2187.5],[667.5,2337.5],[520,2480],[375,2653],[175,2825],[50,2927.5],[50,3612.5],[147.5,3612.5],[305,3612.5],[425,3612.5],[575,3612.5],[700,3612.5],[375,3912.5],[375,4152.5],[375,4385],[375,4550],[375,4985],[212.5,5180],[375,5180],[537.5,5180],[50,5435],[212.5,5435],[375,5435],[537.5,5435],[700,5435],[618.5,5667.5],[456.5,5667.5],[293.5,5667.5],[131.5,5667.5],[212,5822.5],[375,5822.5],[538,5822.5],[300,5977.5],[450,5977.5],[375,6072.5],[77.5,6860],[220,6987.5],[375,7175],[542.5,7310],[700,7467.5],[490,7835],[272.5,8075],[375,8435],[375,9072.5],[375,9282.5],[375,9425],[375,9597.5],[375,9747.5],[115,10272.5],[265,10422.5],[460,10617.5],[602.5,10760],[580,11210],[467.5,11345],[265,11547.5],[115,11697.5],[375,12260],[375,12507.5],[357.5,13122.5],[375,13505],[375,13992.5],[375,14570],[175,14570],[575,14570],[375,14690],[375,14450],[375,15192.5],[375,15425],[375,15620],[375,15775],[175,15825],[575,15825],[275,15925],[475,15925],[375,16025],[375,16617.5],[375,16760],[375,16932.5],[375,17090],[175,17125],[575,17125],[275,17225],[475,17225],[375,17325]],asteroidPath=[[137.5,8277.5,0,0],[512.5,9680,5,0],[242.5,9515,-5,0][0],[618.75,12627.5,-3,0],[131.25,12807.5,3,0],[618.75,12950,-3,0],[490,14247.5,-2,2],[212.5,14150,2,2],[70,16992.5,0,0],[670,16992.5,0,0],[145,16445,4,-4],[131.25,16027.5,5,0],[370,15097.5,0,0],[587.5,14855,-2,3],[85,14705,2,2],[580,13705,0,0],[137.5,13317.5,0,0],[122.5,13040,3,-4],[618.75,12012.5,0,0],[377.5,12012.5,0,0],[131.25,12012.5,0,0],[385,11802.5,0,0],[537.5,10992.5,4,0],[212.5,10992.5,-2,0],[377.5,10992.5,0,0],[377.5,9935,0,0],[537.5,8562.5,-3,3],[375,8782.5,0,-3],[377.5,6807.5,0,-2],[700,6080,-3,-3],[50,6080,3,-3],[618.75,4730,-1,0],[212.5,4475,1,0],[618.75,4257.5,-3,0],[131.25,4032.5,3,0],[618.75,3237.5,-3,0],[131.25,3237.5,3,0],[212.5,1077.5,0,0],[618.75,325,0,0]],level1Stars=new Array;for(i in starPath)level1Stars.push(new Star("star",starPath[i][0],starPath[i][1],14.5,0,0,colours[Math.floor(Math.random()*colours.length)]));for(j in asteroidPath)level1Stars.push(new Star("asteroid",asteroidPath[j][0],asteroidPath[j][1],30,asteroidPath[j][2],asteroidPath[j][3]));var level2Stars=new Array,level3Stars=new Array,level4Stars=new Array,level5Stars=new Array;generateStars(level2Stars,60,50),generateStars(level3Stars,60,60),generateStars(level4Stars,50,60),generateStars(level5Stars,80,70,16e3);var levelStars=[level1Stars,level2Stars,level3Stars,level4Stars,level5Stars],planet,highScorePosition,highScoreId=null,name,scores,nameFlicker=0,hero=new Hero,ctx,effectiveCanvas,invincible=!1,autopilot=!1,hyperdrive=!1,hyperdriveOffset=0,timePosition=null,timeSequence=null,remain,levelLimit=5,highScores=!1,stars,slowTime=null,playTheme=!1,level,score,lives,keysDown={};addEventListener("keydown",function(e){highScores&&13==e.keyCode&&(highScores=!1,resetScore(),resetGame()),(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)&&e.preventDefault(),keysDown[e.keyCode]=!0},!1),addEventListener("keyup",function(e){delete keysDown[e.keyCode]},!1),window.onload=function(){var canvas=document.getElementById("game");effectiveCanvas={width:canvas.width,height:canvas.height-60},canvas.getContext?(ctx=canvas.getContext("2d"),resetScore(),resetGame(),setInterval(update,17)):alert("Your browser does not support this game.")};